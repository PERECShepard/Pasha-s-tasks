#include <iostream>
#include "balance.cpp"
#include "randomEngine.cpp"

class NumberGame{
    int computerChoice;
    int randNumber;
    int humanChoice;
    Balance balance = Balance(1000, 1000);
    RandomEngine randomService;
public:
    void run(){
        humanChoice = getPlayerInput();
        computerChoice = getComputerInput(humanChoice);
        randNumber = randomService.getRandomNumber();
            int absComputer = std::abs(computerChoice - randNumber);
            int absHuman = std::abs(humanChoice - randNumber);
            std::cout << "Game begin" << std::endl
                      << "Pc chose: " << computerChoice << std::endl
                      << "Your choice: " << humanChoice << std::endl
                      << "Number: " << randNumber << std::endl;
            if (absComputer == absHuman) {
                defineWinnerByRange(humanChoice, computerChoice);
            } else {
                defineWinnerByAbs(absHuman, absComputer);
            }
            balance.showBalance();
    }
    int getPlayerInput(){
        int number;
        std::cout << "Please enter the number between 1 - 10 range:";
        while(std::cin >> number && !(number >= 1 && number <= 10)){
            std::cout << "Invalid input. Repeat.";
        }
        return number;
    }
    int getComputerInput(int humanNumb){
        int computerChoice; // Можно ли так сделать?
        while(computerChoice == humanNumb){
            computerChoice = randomService.getRandomNumber();
        }
        return computerChoice;
    }
    void defineWinnerByRange(int compChoice, int humChoice){
        if(humChoice < compChoice){
            std::cout << "U R win because your number were less" << std::endl;
            balance.humWinBalance(); // лучше не сокращать
        }else {
            std::cout << "PC win because his number were less" << std::endl;
            balance.pcWinBalance(); // Если у тебя везде фигурирует Computer, не надо потом это превращать в pc
        }
    }
    void defineWinnerByAbs(int humAbs, int compAbs){
        if(humAbs < compAbs){
            std::cout << "U R win because your number were closer" << std::endl;
            balance.humWinBalance();
        }else {
            std::cout << "PC win because his number was closer" << std::endl;
            balance.pcWinBalance();
        }
    }
};

int main() {
    NumberGame game;
    game.run();
}
